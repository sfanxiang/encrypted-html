<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Self-decrypting HTML page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
    <div id="main">
    <p>PDF viewer requires JavaScript to display.</p>
    </div>
    <script id="data" type="application/json">
        {"salt":[65,98,55,37,194,17,234,69,217,29,168,28,55,12,114,173],"iv":[116,49,107,11,169,10,24,125,193,62,22,115,157,131,198,55],"encrypted":"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"}
    </script>
    <script>
        var download_file_name = 'download.pdf';

        if (window.crypto && !window.crypto.subtle && window.crypto.webkitSubtle) {
            window.crypto.subtle = window.crypto.webkitSubtle;
        }

        function base64ToArray(base64) {
            return new Uint8Array(atob(base64).split('').map(function (c) {
                return c.charCodeAt(0);
            }));
        }

        function deriveKey(password, salt) {
            var passwordBytes = new TextEncoder('utf-8').encode(password);

            return window.crypto.subtle.importKey(
                'raw',
                passwordBytes, {
                    name: 'PBKDF2'
                },
                false,
                ['deriveKey']
            ).then(function (key) {
                return window.crypto.subtle.deriveKey({
                        name: 'PBKDF2',
                        salt: salt,
                        iterations: 200000,
                        hash: {
                            name: 'SHA-1'
                        }
                    },
                    key, {
                        name: 'AES-GCM',
                        length: 128
                    },
                    false,
                    ['decrypt']
                )
            });
        }

        function decrypt(key, iv, bytes) {
            return window.crypto.subtle.decrypt({
                name: 'AES-GCM',
                length: 128,
                iv: iv
            }, key, bytes);
        }

        function extractDecryptedFile(buffer) {
            var bytes = new Uint8Array(buffer);
            var slash_pos = Array.prototype.indexOf.call(bytes, '/'.charCodeAt(0));
            if (slash_pos == -1) {
                throw 'Decrypted data is corrupted';
            } else {
                var name = new TextDecoder('utf-8').decode(new Uint8Array(Array.prototype.slice.call(bytes, 0, slash_pos)));
                var content = new Uint8Array(Array.prototype.slice.call(bytes, slash_pos + 1));
                return {
                    name: name,
                    content: content
                };
            }
        }

        function display(file) {
            var blob = new Blob([file.content]);
            var url = window.URL.createObjectURL(blob);

            var iframe = document.createElement('iframe');
            iframe.src = 'pdfjs/web/viewer.html?file=' + url + '&download_file_name=' + download_file_name;
            iframe.style = 'position:fixed; top:0; left:0; bottom:0; right:0; width:100%; height:100%; border:none; margin:0; padding:0; overflow:hidden; z-index:999999;';

            var main = document.getElementById('main');
            main.innerHTML = '';
            main.appendChild(iframe);
        }

        function runDecrypt() {
            if (!window.crypto) {
                alert(
                    'Full support for the WebCrypto API is needed for decryption. Please use one of the following browsers: Chrome 37+, Firefox 34+, Safari 7+, Opera 24+'
                )
            }
            setTimeout(function () {
                var data = JSON.parse(document.getElementById('data').textContent);
                var salt = new Uint8Array(data.salt);
                var iv = new Uint8Array(data.iv);
                var encrypted = base64ToArray(data.encrypted);

                var password = window.location.hash.substr(1);
                deriveKey(password, salt)
                    .then(function (key) {
                        return decrypt(key, iv, encrypted);
                    })
                    .catch(function () {
                        throw 'Wrong password or corrupted document.';
                    })
                    .then(extractDecryptedFile)
                    .then(display)
                    .catch(function (e) {
                        document.getElementById('main').innerHTML = '<p id=\"message\"></p>';
                        document.getElementById('message').textContent = 'Error decrypting: ' + e;
                    });
            }, 0);
        }

        window.onload = function() {
            document.getElementById('main').innerHTML = '<p>Loading...</p>';
            runDecrypt();
        };
        window.onhashchange = function() {
            document.getElementById('main').innerHTML = '<p>Loading...</p>';
            runDecrypt();
        };
    </script>
</body>

</html>
