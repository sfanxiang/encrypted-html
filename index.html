<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Self-decrypting HTML page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
    <div id="main">
    <p>PDF viewer requires JavaScript to display.</p>
    </div>
    <script id="data" type="application/json">
        {"iv":[101,143,176,184,117,176,181,53,182,92,111,9],"encrypted":"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"}
    </script>
    <script>
        var download_file_name = 'download.pdf';

        if (window.crypto && !window.crypto.subtle && window.crypto.webkitSubtle) {
            window.crypto.subtle = window.crypto.webkitSubtle;
        }

        function base64ToArray(base64) {
            return new Uint8Array(atob(base64).split('').map(function (c) {
                return c.charCodeAt(0);
            }));
        }

        function textEncode(str) {
            if (window.TextEncoder) {
                return new TextEncoder('utf-8').encode(str);
            }
            var utf8 = unescape(encodeURIComponent(str));
            var result = new Uint8Array(utf8.length);
            for (var i = 0; i < utf8.length; i++) {
                result[i] = utf8.charCodeAt(i);
            }
            return result;
        }

        function decrypt(key, iv, bytes) {
            return window.crypto.subtle.decrypt({
                name: 'AES-GCM',
                tagLength: 128,
                iv: iv,
            }, key, bytes);
        }

        function extractDecryptedFile(buffer) {
            var bytes = new Uint8Array(buffer);
            var slash_pos = Array.prototype.indexOf.call(bytes, '/'.charCodeAt(0));
            if (slash_pos == -1) {
                throw 'Decrypted data is corrupted';
            } else {
                // var name = new TextDecoder('utf-8').decode(new Uint8Array(Array.prototype.slice.call(bytes, 0, slash_pos)));
                var content = new Uint8Array(Array.prototype.slice.call(bytes, slash_pos + 1));
                return {
                    // name: name,
                    content: content
                };
            }
        }

        function display(file) {
            var blob = new Blob([file.content]);
            var url = window.URL.createObjectURL(blob);

            var iframe = document.createElement('iframe');
            iframe.src = 'pdfjs/web/viewer.html?file=' + url + '&download_file_name=' + download_file_name;
            iframe.style = 'position:fixed; top:0; left:0; bottom:0; right:0; width:100%; height:100%; border:none; margin:0; padding:0; overflow:hidden; z-index:999999;';

            var main = document.getElementById('main');
            main.innerHTML = '';
            main.appendChild(iframe);
        }

        function runDecrypt() {
            if (!window.crypto) {
                alert(
                    'Full support for the WebCrypto API is needed for decryption. Please use one of the following browsers: Chrome 37+, Firefox 34+, Safari 7+, Opera 24+'
                )
            }
            setTimeout(function () {
                try {
                    var data = JSON.parse(document.getElementById('data').textContent);
                    var iv = new Uint8Array(data.iv);
                    var encrypted = base64ToArray(data.encrypted);

                    var key = window.location.hash.substr(1);
                    key = atob(key.replace(/_/g, '/').replace(/-/g, '+'));
                    key = new Uint8Array(key.split('').map(function (c) {
                        return c.charCodeAt(0);
                    }));
                    window.crypto.subtle.importKey(
                        'raw',
                        key, {
                            name: 'AES-GCM',
                            length: 128
                        },
                        false,
                        ['decrypt']
                    )
                        .then(function(key) {
                            return decrypt(key, iv, encrypted);
                        })
                        .catch(function (e) {
                            throw 'Wrong password or corrupted document.';
                        })
                        .then(extractDecryptedFile)
                        .then(display)
                        .catch(function (e) {
                            document.getElementById('main').innerHTML = '<p id=\"message\"></p>';
                            document.getElementById('message').textContent = 'Error decrypting: ' + e;
                        });
                } catch (e) {
                    document.getElementById('main').innerHTML = '<p id=\"message\"></p>';
                    document.getElementById('message').textContent = 'Error reading input: ' + e;
                }
            }, 0);
        }

        window.onload = function() {
            document.getElementById('main').innerHTML = '<p>Loading...</p>';
            runDecrypt();
        };
        window.onhashchange = function() {
            document.getElementById('main').innerHTML = '<p>Loading...</p>';
            runDecrypt();
        };
    </script>
</body>

</html>
